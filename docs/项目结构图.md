# 📁 项目结构图

## 完整目录结构

```
customer-service-desktop/
│
├── 📁 electron/                    # Electron 主进程
│   ├── main.js                    # 窗口管理、应用生命周期
│   └── preload.js                 # 预加载脚本
│
├── 📁 server/                      # Fastify 后端服务
│   ├── index.js                   # API 路由和业务逻辑
│   └── config.js                  # 配置管理
│
├── 📁 src/                         # React 前端应用
│   ├── 📁 api/                    # API 接口封装
│   │   └── index.js               # Axios 实例和接口定义
│   │
│   ├── 📁 components/             # React 组件
│   │   ├── Sidebar.jsx            # 侧边栏导航
│   │   ├── CustomerList.jsx       # 客服列表页面
│   │   ├── CustomerForm.jsx       # 客服表单组件
│   │   ├── SessionManagement.jsx  # 会话管理页面
│   │   ├── QualityInspection.jsx  # 质检管理页面
│   │   └── Modal.jsx              # 模态框组件
│   │
│   ├── App.jsx                    # 主应用组件
│   ├── main.jsx                   # React 入口文件
│   └── index.css                  # 全局样式
│
├── 📁 database/                    # 数据库脚本
│   └── init.sql                   # 数据库初始化脚本
│
├── 📁 tests/                       # 🧪 测试文件
│   ├── README.md                  # 测试说明
│   └── test-db.js                 # 数据库连接测试
│
├── 📁 docs/                        # 📚 完整文档
│   ├── README.md                  # 文档中心索引
│   ├── INSTALL.md                 # 安装指南
│   ├── 启动说明.md                 # 快速启动
│   ├── 开发指南.md                 # 开发文档
│   ├── 项目说明.md                 # 完整项目文档
│   ├── 项目总览.md                 # 项目概览
│   ├── 项目完成说明.md             # 完成总结
│   ├── STRUCTURE.md               # 项目结构说明
│   ├── 项目结构图.md               # 项目结构图（本文件）
│   └── LICENSE                    # 开源许可证
│
├── 📄 package.json                 # 项目配置和依赖
├── 📄 vite.config.js              # Vite 构建配置
├── 📄 tailwind.config.js          # Tailwind CSS 配置
├── 📄 postcss.config.js           # PostCSS 配置
├── 📄 index.html                  # HTML 入口文件
│
├── 📄 .env.example                # 环境变量示例
├── 📄 .gitignore                  # Git 忽略文件
│
├── 📄 README.md                   # 项目入口文档
│
├── 🚀 start.bat                   # Windows 启动脚本
└── 🚀 start.sh                    # Mac/Linux 启动脚本
```

## 📊 目录统计

| 类型 | 数量 | 说明 |
|------|------|------|
| 源代码文件 | 15 | JS/JSX 文件 |
| 配置文件 | 5 | 项目配置 |
| 文档文件 | 10 | Markdown 文档 |
| 脚本文件 | 2 | 启动脚本 |
| 数据库脚本 | 1 | SQL 文件 |
| **总计** | **33** | **所有文件** |

## 🎯 核心目录说明

### 📁 electron/ - Electron 主进程
**职责：** 桌面应用容器和系统级功能
- 窗口管理
- 应用生命周期
- 系统 API 访问

### 📁 server/ - 后端服务
**职责：** RESTful API 服务
- 数据库操作
- 业务逻辑处理
- API 路由管理

### 📁 src/ - 前端应用
**职责：** 用户界面
- React 组件
- 状态管理
- API 调用

### 📁 database/ - 数据库
**职责：** 数据持久化
- 表结构定义
- 初始数据
- 索引优化

### 📁 docs/ - 文档中心
**职责：** 项目文档
- 安装指南
- 开发文档
- 项目说明

## 🔄 数据流向

```
┌─────────────┐
│   用户操作   │
└──────┬──────┘
       │
       ↓
┌─────────────────────┐
│  React 组件          │
│  (src/components/)  │
└──────┬──────────────┘
       │
       ↓
┌─────────────────────┐
│  API 调用            │
│  (src/api/)         │
└──────┬──────────────┘
       │
       ↓
┌─────────────────────┐
│  HTTP 请求           │
│  (Axios)            │
└──────┬──────────────┘
       │
       ↓
┌─────────────────────┐
│  Fastify 服务器      │
│  (server/index.js)  │
└──────┬──────────────┘
       │
       ↓
┌─────────────────────┐
│  MySQL 数据库        │
│  (database/)        │
└──────┬──────────────┘
       │
       ↓
┌─────────────────────┐
│  返回数据            │
└──────┬──────────────┘
       │
       ↓
┌─────────────────────┐
│  更新 UI             │
└──────┬──────────────┘
       │
       ↓
┌─────────────────────┐
│  Toast 提醒          │
└─────────────────────┘
```

## 🏗️ 技术架构

```
┌─────────────────────────────────────────┐
│           Electron 容器                  │
│  ┌─────────────────────────────────┐   │
│  │      React 前端 (Port 5173)      │   │
│  │  ┌──────────────────────────┐   │   │
│  │  │  Components (UI 组件)     │   │   │
│  │  └──────────────────────────┘   │   │
│  │  ┌──────────────────────────┐   │   │
│  │  │  API Layer (接口层)       │   │   │
│  │  └──────────────────────────┘   │   │
│  └─────────────────────────────────┘   │
└─────────────────────────────────────────┘
                    ↕ HTTP
┌─────────────────────────────────────────┐
│    Fastify 后端 (Port 3001)              │
│  ┌─────────────────────────────────┐   │
│  │  API Routes (路由)               │   │
│  └─────────────────────────────────┘   │
│  ┌─────────────────────────────────┐   │
│  │  Business Logic (业务逻辑)       │   │
│  └─────────────────────────────────┘   │
└─────────────────────────────────────────┘
                    ↕ SQL
┌─────────────────────────────────────────┐
│      MySQL 数据库 (Port 3306)            │
│  ┌─────────────────────────────────┐   │
│  │  Tables (数据表)                 │   │
│  └─────────────────────────────────┘   │
└─────────────────────────────────────────┘
```

## 📦 依赖关系

```
package.json
├── dependencies (运行时)
│   ├── react + react-dom          → UI 框架
│   ├── fastify + @fastify/cors    → 后端服务
│   ├── mysql2                     → 数据库
│   ├── axios                      → HTTP 客户端
│   ├── react-toastify             → 消息提醒
│   ├── zustand                    → 状态管理
│   ├── bcrypt                     → 密码加密
│   └── jsonwebtoken               → JWT 认证
│
└── devDependencies (开发)
    ├── electron                   → 桌面容器
    ├── vite + @vitejs/plugin-react → 构建工具
    ├── tailwindcss + postcss      → 样式框架
    ├── concurrently + wait-on     → 并发运行
    └── electron-builder           → 应用打包
```

## 🎨 样式架构

```
Tailwind CSS 配置
├── 主题色 (浅绿色)
│   ├── primary-50  → #f0fdf4
│   ├── primary-100 → #dcfce7
│   ├── primary-200 → #bbf7d0
│   ├── primary-300 → #86efac
│   ├── primary-400 → #4ade80
│   ├── primary-500 → #22c55e
│   ├── primary-600 → #16a34a (主色)
│   ├── primary-700 → #15803d
│   ├── primary-800 → #166534
│   └── primary-900 → #14532d
│
└── 全局样式
    └── src/index.css
```

## 🗄️ 数据库架构

```
MySQL 数据库
├── departments (部门表)
├── users (用户表)
├── employees (员工表)
└── quality_sessions (质检会话表)
```

## 📝 文档架构

```
docs/
├── 入门文档
│   ├── README.md (文档中心)
│   ├── INSTALL.md (安装指南)
│   └── 启动说明.md (快速启动)
│
├── 开发文档
│   ├── 开发指南.md (开发文档)
│   ├── 项目说明.md (完整文档)
│   └── STRUCTURE.md (结构说明)
│
├── 项目文档
│   ├── 项目总览.md (项目概览)
│   ├── 项目完成说明.md (完成总结)
│   └── 项目结构图.md (本文件)
│
└── 其他
    └── LICENSE (许可证)
```

## 🚀 启动流程

```
1. 用户运行 start.bat/start.sh
   ↓
2. 检查依赖 (node_modules)
   ↓
3. 检查配置 (.env)
   ↓
4. 启动 Fastify 服务器 (Port 3001)
   ↓
5. 启动 Vite 开发服务器 (Port 5173)
   ↓
6. 启动 Electron 应用
   ↓
7. 加载 React 前端
   ↓
8. 应用就绪 ✅
```

## 🔧 构建流程

```
npm run build
   ↓
1. Vite 构建 React 应用
   ↓
2. 输出到 dist-react/
   ↓
npm run package
   ↓
3. Electron Builder 打包
   ↓
4. 输出到 dist-app/
   ↓
5. 生成安装包 ✅
```

## 📊 文件大小

| 目录/文件 | 大小 | 说明 |
|----------|------|------|
| node_modules/ | ~500MB | 依赖包 |
| src/ | ~50KB | 前端源码 |
| server/ | ~10KB | 后端源码 |
| electron/ | ~5KB | Electron 代码 |
| database/ | ~20KB | 数据库脚本 |
| docs/ | ~150KB | 文档 |
| 配置文件 | ~10KB | 配置 |

## 🎯 端口分配

| 端口 | 服务 | 说明 |
|------|------|------|
| 3001 | Fastify API | 后端服务 |
| 5173 | Vite Dev Server | 前端开发 |
| 3306 | MySQL | 数据库 |

## 📈 代码统计

| 类型 | 行数 | 说明 |
|------|------|------|
| 前端代码 | ~2000 | React 组件 |
| 后端代码 | ~500 | Fastify API |
| 配置文件 | ~200 | 各种配置 |
| 文档 | ~5000 | Markdown |
| 数据库脚本 | ~300 | SQL |
| **总计** | **~8000** | **所有代码** |

---

**版本：** 1.0.0
**最后更新：** 2024-11-09
