# å¼€å‘æŒ‡å—

## å¿«é€Ÿå¼€å§‹

### Windows ç”¨æˆ·
åŒå‡»è¿è¡Œ `start.bat` æ–‡ä»¶å³å¯å¯åŠ¨åº”ç”¨ã€‚

### Mac/Linux ç”¨æˆ·
```bash
chmod +x start.sh
./start.sh
```

æˆ–è€…æ‰‹åŠ¨è¿è¡Œï¼š
```bash
npm run dev
```

## å¼€å‘ç¯å¢ƒé…ç½®

### 1. å¿…éœ€è½¯ä»¶
- Node.js >= 18.0.0
- MySQL >= 8.0
- Git

### 2. æ¨èå·¥å…·
- VS Codeï¼ˆæ¨èæ’ä»¶ï¼šESLint, Prettier, Tailwind CSS IntelliSenseï¼‰
- MySQL Workbench æˆ– Navicat
- Postmanï¼ˆAPI æµ‹è¯•ï¼‰

### 3. æ•°æ®åº“åˆå§‹åŒ–

#### æ–¹æ³•ä¸€ï¼šä½¿ç”¨ SQL è„šæœ¬
```bash
mysql -u root -p < database/init.sql
```

#### æ–¹æ³•äºŒï¼šæ‰‹åŠ¨æ‰§è¡Œ
1. æ‰“å¼€ MySQL å®¢æˆ·ç«¯
2. æ‰§è¡Œ `database/init.sql` æ–‡ä»¶ä¸­çš„ SQL è¯­å¥

## é¡¹ç›®ç»“æ„è¯¦è§£

### Electron ä¸»è¿›ç¨‹ (electron/)
```
electron/
â”œâ”€â”€ main.js       # çª—å£ç®¡ç†ã€åº”ç”¨ç”Ÿå‘½å‘¨æœŸ
â””â”€â”€ preload.js    # é¢„åŠ è½½è„šæœ¬ã€å®‰å…¨éš”ç¦»
```

**ä¸»è¦èŒè´£ï¼š**
- åˆ›å»ºå’Œç®¡ç†åº”ç”¨çª—å£
- å¤„ç†ç³»ç»Ÿçº§äº‹ä»¶
- æä¾›åŸç”Ÿ API è®¿é—®

### Fastify åç«¯ (server/)
```
server/
â”œâ”€â”€ index.js      # API è·¯ç”±ã€ä¸šåŠ¡é€»è¾‘
â””â”€â”€ config.js     # é…ç½®ç®¡ç†
```

**ä¸»è¦èŒè´£ï¼š**
- æä¾› RESTful API
- æ•°æ®åº“æ“ä½œ
- ä¸šåŠ¡é€»è¾‘å¤„ç†

### React å‰ç«¯ (src/)
```
src/
â”œâ”€â”€ components/   # UI ç»„ä»¶
â”œâ”€â”€ api/         # API æ¥å£å°è£…
â”œâ”€â”€ App.jsx      # ä¸»åº”ç”¨
â”œâ”€â”€ main.jsx     # å…¥å£æ–‡ä»¶
â””â”€â”€ index.css    # å…¨å±€æ ·å¼
```

**ä¸»è¦èŒè´£ï¼š**
- ç”¨æˆ·ç•Œé¢æ¸²æŸ“
- ç”¨æˆ·äº¤äº’å¤„ç†
- çŠ¶æ€ç®¡ç†

## å¼€å‘æµç¨‹

### 1. æ·»åŠ æ–°åŠŸèƒ½

#### æ­¥éª¤ 1ï¼šè®¾è®¡ API
åœ¨ `server/index.js` ä¸­æ·»åŠ æ–°çš„è·¯ç”±ï¼š

```javascript
// ç¤ºä¾‹ï¼šè·å–ç»Ÿè®¡æ•°æ®
fastify.get('/api/statistics', async (request, reply) => {
  try {
    const [rows] = await pool.query('SELECT COUNT(*) as total FROM users')
    return { total: rows[0].total }
  } catch (error) {
    reply.code(500).send({ error: 'è·å–ç»Ÿè®¡å¤±è´¥' })
  }
})
```

#### æ­¥éª¤ 2ï¼šå°è£… API è°ƒç”¨
åœ¨ `src/api/index.js` ä¸­æ·»åŠ ï¼š

```javascript
export const statisticsAPI = {
  getTotal: () => api.get('/statistics')
}
```

#### æ­¥éª¤ 3ï¼šåˆ›å»ºç»„ä»¶
åœ¨ `src/components/` ä¸­åˆ›å»ºæ–°ç»„ä»¶ï¼š

```javascript
import React, { useState, useEffect } from 'react'
import { statisticsAPI } from '../api'

const Statistics = () => {
  const [total, setTotal] = useState(0)

  useEffect(() => {
    loadData()
  }, [])

  const loadData = async () => {
    const response = await statisticsAPI.getTotal()
    setTotal(response.data.total)
  }

  return <div>æ€»ç”¨æˆ·æ•°ï¼š{total}</div>
}

export default Statistics
```

#### æ­¥éª¤ 4ï¼šæ³¨å†Œè·¯ç”±
åœ¨ `src/App.jsx` ä¸­æ·»åŠ æ–°é¡µé¢ï¼š

```javascript
import Statistics from './components/Statistics'

// åœ¨ renderContent ä¸­æ·»åŠ 
case 'statistics':
  return <Statistics />
```

### 2. æ•°æ®åº“æ“ä½œ

#### æŸ¥è¯¢æ•°æ®
```javascript
const [rows] = await pool.query('SELECT * FROM users WHERE id = ?', [userId])
```

#### æ’å…¥æ•°æ®
```javascript
const [result] = await pool.query(
  'INSERT INTO users (username, email) VALUES (?, ?)',
  [username, email]
)
const newId = result.insertId
```

#### æ›´æ–°æ•°æ®
```javascript
await pool.query(
  'UPDATE users SET email = ? WHERE id = ?',
  [newEmail, userId]
)
```

#### åˆ é™¤æ•°æ®
```javascript
await pool.query('DELETE FROM users WHERE id = ?', [userId])
```

### 3. çŠ¶æ€ç®¡ç†

#### ä½¿ç”¨ useState
```javascript
const [data, setData] = useState([])
const [loading, setLoading] = useState(false)
```

#### ä½¿ç”¨ Zustandï¼ˆå…¨å±€çŠ¶æ€ï¼‰
```javascript
// åˆ›å»º store
import create from 'zustand'

const useStore = create((set) => ({
  user: null,
  setUser: (user) => set({ user }),
  clearUser: () => set({ user: null })
}))

// ä½¿ç”¨ store
const user = useStore((state) => state.user)
const setUser = useStore((state) => state.setUser)
```

### 4. æ ·å¼å¼€å‘

#### Tailwind CSS ç±»å
```jsx
<div className="bg-primary-600 text-white rounded-lg px-4 py-2 hover:bg-primary-700">
  æŒ‰é’®
</div>
```

#### è‡ªå®šä¹‰é¢œè‰²
åœ¨ `tailwind.config.js` ä¸­é…ç½®ï¼š

```javascript
colors: {
  primary: {
    50: '#f0fdf4',
    // ... å…¶ä»–è‰²é˜¶
  }
}
```

## è°ƒè¯•æŠ€å·§

### 1. å‰ç«¯è°ƒè¯•
- ä½¿ç”¨ Chrome DevTools
- React DevTools æ‰©å±•
- Console.log è°ƒè¯•

### 2. åç«¯è°ƒè¯•
- Fastify æ—¥å¿—è¾“å‡º
- Postman æµ‹è¯• API
- MySQL æŸ¥è¯¢æ—¥å¿—

### 3. Electron è°ƒè¯•
- ä¸»è¿›ç¨‹ï¼š`console.log` è¾“å‡ºåˆ°ç»ˆç«¯
- æ¸²æŸ“è¿›ç¨‹ï¼šChrome DevTools
- ä½¿ç”¨ `electron-debug` åŒ…

## å¸¸è§é—®é¢˜è§£å†³

### é—®é¢˜ 1ï¼šç«¯å£è¢«å ç”¨
```bash
# Windows
netstat -ano | findstr :3001
taskkill /PID <PID> /F

# Mac/Linux
lsof -i :3001
kill -9 <PID>
```

### é—®é¢˜ 2ï¼šæ•°æ®åº“è¿æ¥å¤±è´¥
1. æ£€æŸ¥ MySQL æœåŠ¡æ˜¯å¦å¯åŠ¨
2. æ£€æŸ¥ `.env` é…ç½®æ˜¯å¦æ­£ç¡®
3. æ£€æŸ¥æ•°æ®åº“æ˜¯å¦å­˜åœ¨
4. æ£€æŸ¥ç”¨æˆ·æƒé™

### é—®é¢˜ 3ï¼šä¾èµ–å®‰è£…å¤±è´¥
```bash
# æ¸…é™¤ç¼“å­˜
npm cache clean --force

# åˆ é™¤ node_modules
rm -rf node_modules package-lock.json

# é‡æ–°å®‰è£…
npm install
```

### é—®é¢˜ 4ï¼šElectron çª—å£ç™½å±
1. æ£€æŸ¥ Vite æœåŠ¡å™¨æ˜¯å¦å¯åŠ¨
2. æ£€æŸ¥æ§åˆ¶å°é”™è¯¯ä¿¡æ¯
3. æ¸…é™¤ Electron ç¼“å­˜

## æ€§èƒ½ä¼˜åŒ–å»ºè®®

### 1. å‰ç«¯ä¼˜åŒ–
- ä½¿ç”¨ React.memo é¿å…ä¸å¿…è¦çš„é‡æ¸²æŸ“
- ä½¿ç”¨ useMemo å’Œ useCallback ç¼“å­˜è®¡ç®—ç»“æœ
- å›¾ç‰‡æ‡’åŠ è½½
- ä»£ç åˆ†å‰²

### 2. åç«¯ä¼˜åŒ–
- ä½¿ç”¨æ•°æ®åº“è¿æ¥æ± 
- æ·»åŠ é€‚å½“çš„ç´¢å¼•
- æŸ¥è¯¢ç»“æœç¼“å­˜
- åˆ†é¡µæŸ¥è¯¢

### 3. æ•°æ®åº“ä¼˜åŒ–
- åˆç†è®¾è®¡è¡¨ç»“æ„
- æ·»åŠ å¿…è¦çš„ç´¢å¼•
- é¿å… N+1 æŸ¥è¯¢
- ä½¿ç”¨ EXPLAIN åˆ†ææŸ¥è¯¢

## æµ‹è¯•

### å•å…ƒæµ‹è¯•
```bash
npm test
```

### API æµ‹è¯•
ä½¿ç”¨ Postman æˆ– curlï¼š

```bash
# è·å–å®¢æœåˆ—è¡¨
curl http://localhost:3001/api/customers

# æ·»åŠ å®¢æœ
curl -X POST http://localhost:3001/api/customers \
  -H "Content-Type: application/json" \
  -d '{"name":"æµ‹è¯•","email":"test@test.com"}'
```

## æ„å»ºå’Œæ‰“åŒ…

### å¼€å‘æ„å»º
```bash
npm run build
```

### ç”Ÿäº§æ‰“åŒ…
```bash
npm run package
```

æ‰“åŒ…åçš„æ–‡ä»¶åœ¨ `dist/` ç›®å½•ã€‚

## Git å·¥ä½œæµ

### åˆ†æ”¯ç®¡ç†
- `main` - ä¸»åˆ†æ”¯ï¼Œç¨³å®šç‰ˆæœ¬
- `develop` - å¼€å‘åˆ†æ”¯
- `feature/*` - åŠŸèƒ½åˆ†æ”¯
- `bugfix/*` - ä¿®å¤åˆ†æ”¯

### æäº¤è§„èŒƒ
```bash
git commit -m "feat: æ·»åŠ ç»Ÿè®¡åŠŸèƒ½"
git commit -m "fix: ä¿®å¤å®¢æœåˆ—è¡¨åŠ è½½é—®é¢˜"
git commit -m "docs: æ›´æ–°å¼€å‘æ–‡æ¡£"
```

## ä»£ç å®¡æŸ¥æ¸…å•

- [ ] ä»£ç ç¬¦åˆé¡¹ç›®è§„èŒƒ
- [ ] æ²¡æœ‰ console.log è°ƒè¯•ä»£ç 
- [ ] é”™è¯¯å¤„ç†å®Œå–„
- [ ] æ³¨é‡Šæ¸…æ™°
- [ ] æµ‹è¯•é€šè¿‡
- [ ] æ€§èƒ½ä¼˜åŒ–
- [ ] å®‰å…¨æ£€æŸ¥

## å‘å¸ƒæµç¨‹

1. æ›´æ–°ç‰ˆæœ¬å·ï¼ˆpackage.jsonï¼‰
2. æ›´æ–° CHANGELOG
3. è¿è¡Œæµ‹è¯•
4. æ„å»ºç”Ÿäº§ç‰ˆæœ¬
5. æ‰“åŒ…åº”ç”¨
6. åˆ›å»º Git tag
7. å‘å¸ƒåˆ°åˆ†å‘å¹³å°

## å­¦ä¹ èµ„æº

### å®˜æ–¹æ–‡æ¡£
- [Electron](https://www.electronjs.org/)
- [React](https://react.dev/)
- [Fastify](https://www.fastify.io/)
- [Tailwind CSS](https://tailwindcss.com/)

### æ¨èæ•™ç¨‹
- Electron å®æˆ˜æ•™ç¨‹
- React Hooks å®Œå…¨æŒ‡å—
- Fastify æœ€ä½³å®è·µ
- MySQL æ€§èƒ½ä¼˜åŒ–

## æŠ€æœ¯æ”¯æŒ

é‡åˆ°é—®é¢˜ï¼Ÿ
1. æŸ¥çœ‹æœ¬æ–‡æ¡£
2. æŸ¥çœ‹ README.md
3. æœç´¢ GitHub Issues
4. è”ç³»å¼€å‘å›¢é˜Ÿ

---

ç¥å¼€å‘æ„‰å¿«ï¼ğŸš€


## æµ‹è¯•

### æµ‹è¯•æ–‡ä»¶å¤¹

æ‰€æœ‰æµ‹è¯•æ–‡ä»¶éƒ½æ”¾åœ¨ `tests/` æ–‡ä»¶å¤¹ä¸­ã€‚

### æ•°æ®åº“è¿æ¥æµ‹è¯•

æµ‹è¯•æ•°æ®åº“è¿æ¥æ˜¯å¦æ­£å¸¸ï¼š

```bash
node tests/test-db.js
```

**è¾“å‡ºç¤ºä¾‹ï¼š**
```
æµ‹è¯•æ•°æ®åº“è¿æ¥...
é…ç½®: { host: 'localhost', user: 'root', ... }
âœ… æ•°æ®åº“è¿æ¥æˆåŠŸï¼
âœ… æŸ¥è¯¢æµ‹è¯•æˆåŠŸ
âœ… æ•°æ®åº“å­˜åœ¨: leixin_customer_service
```

### æ·»åŠ æ–°æµ‹è¯•

åœ¨ `tests/` æ–‡ä»¶å¤¹ä¸­åˆ›å»ºæ–°çš„æµ‹è¯•æ–‡ä»¶ï¼š

**å‘½åè§„èŒƒï¼š**
- `test-*.js` - å•å…ƒæµ‹è¯•
- `integration-*.js` - é›†æˆæµ‹è¯•
- `e2e-*.js` - ç«¯åˆ°ç«¯æµ‹è¯•

**ç¤ºä¾‹ï¼š**
```javascript
// tests/test-api.js
require('dotenv').config()
const axios = require('axios')

async function testAPI() {
  try {
    const response = await axios.get('http://localhost:3001/api/health')
    console.log('âœ… API æµ‹è¯•æˆåŠŸ:', response.data)
  } catch (error) {
    console.error('âŒ API æµ‹è¯•å¤±è´¥:', error.message)
  }
}

testAPI()
```

### è¿è¡Œæµ‹è¯•

```bash
# æ•°æ®åº“æµ‹è¯•
node tests/test-db.js

# API æµ‹è¯•ï¼ˆéœ€è¦å…ˆå¯åŠ¨æœåŠ¡å™¨ï¼‰
node tests/test-api.js

# æœªæ¥å¯ä»¥æ·»åŠ 
npm test
```

### æµ‹è¯•æœ€ä½³å®è·µ

1. **ç‹¬ç«‹æ€§** - æ¯ä¸ªæµ‹è¯•åº”è¯¥ç‹¬ç«‹è¿è¡Œ
2. **æ¸…ç†** - æµ‹è¯•åæ¸…ç†æµ‹è¯•æ•°æ®
3. **æ–‡æ¡£** - åœ¨æµ‹è¯•æ–‡ä»¶ä¸­æ·»åŠ æ³¨é‡Šè¯´æ˜
4. **å‘½å** - ä½¿ç”¨æ¸…æ™°çš„æµ‹è¯•æ–‡ä»¶å
5. **ç»„ç»‡** - æŒ‰åŠŸèƒ½æ¨¡å—ç»„ç»‡æµ‹è¯•æ–‡ä»¶
