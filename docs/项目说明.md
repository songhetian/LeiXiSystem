# 客服管理系统 - 桌面版项目说明

## 项目概述

这是一个完整的企业级客服管理桌面应用，采用现代化技术栈开发，提供客服人员管理、会话管理和质检管理等核心功能。

## 技术架构

### 前端层
- **Electron 28** - 提供桌面应用容器
- **React 18** - 构建用户界面
- **Tailwind CSS** - 浅绿色主题样式
- **Vite** - 快速开发构建工具

### 后端层
- **Fastify 4** - 高性能 Node.js Web 框架
- **MySQL 8** - 关系型数据库
- **MySQL2** - 数据库连接池

### 通信层
- **Axios** - HTTP 客户端
- **RESTful API** - 前后端通信协议

## 核心功能模块

### 1. 客服人员管理
**功能描述：** 管理客服团队成员信息

**主要功能：**
- 添加新客服（姓名、邮箱、电话、部门）
- 编辑客服信息
- 删除客服记录
- 客服评级管理（1-5星）
- 状态管理（在职/离职）

**数据表：** users, employees, departments

**API接口：**
- GET /api/customers - 获取列表
- POST /api/customers - 添加
- PUT /api/customers/:id - 更新
- DELETE /api/customers/:id - 删除

### 2. 会话管理
**功能描述：** 监控和管理客服会话

**主要功能：**
- 查看所有会话列表
- 实时会话状态（进行中/已完成）
- 会话详情查看
- 结束进行中的会话
- 满意度评分展示

**数据表：** quality_sessions, chat_messages

**API接口：**
- GET /api/sessions - 获取会话列表
- GET /api/sessions/:id - 获取详情
- PUT /api/sessions/:id/end - 结束会话

### 3. 质检管理
**功能描述：** 客服服务质量检查和评分

**主要功能：**
- 多维度评分系统
  - 服务态度（权重30%）
  - 专业能力（权重30%）
  - 沟通技巧（权重20%）
  - 合规性（权重20%）
- 质检意见记录
- 综合得分自动计算
- 质检历史查询

**数据表：** quality_sessions, quality_scores

**API接口：**
- GET /api/quality-inspections - 获取质检列表
- POST /api/quality-inspections - 提交质检

## 设计特色

### UI/UX 设计
- **配色方案：** 浅绿色主题（primary-50 到 primary-900）
- **布局结构：** 左侧导航 + 右侧内容区
- **交互方式：** 模态框表单 + Toast 提醒
- **按钮设计：** 圆角、阴影、悬停效果

### 用户体验
- 响应式设计
- 流畅的动画过渡
- 清晰的视觉反馈
- 简洁的操作流程

## 数据流程

### 客服管理流程
```
用户操作 → React组件 → API调用 → Fastify处理 → MySQL操作 → 返回结果 → 更新UI → Toast提醒
```

### 质检评分流程
```
1. 选择待质检会话
2. 打开质检模态框
3. 滑动条调整各项评分
4. 填写评价意见
5. 自动计算综合得分
6. 提交到后端
7. 更新数据库
8. 刷新列表
```

## 文件结构说明

```
customer-service-desktop/
│
├── electron/                    # Electron 主进程
│   ├── main.js                 # 窗口管理、生命周期
│   └── preload.js              # 预加载脚本
│
├── server/                      # Fastify 后端
│   ├── index.js                # API 路由和业务逻辑
│   └── config.js               # 配置文件
│
├── src/                         # React 前端
│   ├── components/             # UI 组件
│   │   ├── Sidebar.jsx         # 侧边栏导航
│   │   ├── CustomerList.jsx    # 客服列表页
│   │   ├── CustomerForm.jsx    # 客服表单
│   │   ├── SessionManagement.jsx  # 会话管理页
│   │   ├── QualityInspection.jsx  # 质检管理页
│   │   └── Modal.jsx           # 模态框组件
│   │
│   ├── api/                    # API 接口封装
│   │   └── index.js            # Axios 实例和接口
│   │
│   ├── App.jsx                 # 主应用组件
│   ├── main.jsx                # React 入口
│   └── index.css               # 全局样式
│
├── package.json                # 项目配置和依赖
├── vite.config.js              # Vite 配置
├── tailwind.config.js          # Tailwind 配置
├── .env.example                # 环境变量示例
└── README.md                   # 项目文档
```

## 开发规范

### 代码风格
- 使用 ES6+ 语法
- 函数式组件 + Hooks
- 组件名使用 PascalCase
- 文件名使用 PascalCase（组件）或 camelCase（工具）

### 命名规范
- 组件：`CustomerList.jsx`
- API：`customerAPI.getAll()`
- 状态：`const [customers, setCustomers] = useState([])`
- 事件处理：`handleAdd`, `handleEdit`, `handleDelete`

### Git 提交规范
- feat: 新功能
- fix: 修复bug
- docs: 文档更新
- style: 代码格式调整
- refactor: 重构
- test: 测试相关
- chore: 构建/工具相关

## 性能优化

### 前端优化
- React.memo 避免不必要的重渲染
- 懒加载组件
- 图片优化和懒加载
- 防抖和节流

### 后端优化
- 数据库连接池
- SQL 查询优化
- 索引优化
- 缓存策略（可扩展 Redis）

### 桌面应用优化
- 窗口预加载
- 资源懒加载
- 内存管理

## 安全考虑

### 数据安全
- 密码加密存储（bcrypt）
- SQL 注入防护（参数化查询）
- XSS 防护（输入验证）

### 权限控制
- JWT 认证（可扩展）
- 角色权限管理
- API 访问控制

## 扩展方向

### 短期扩展
- [ ] 用户登录认证
- [ ] 数据导出（Excel/PDF）
- [ ] 搜索和筛选功能
- [ ] 数据统计图表

### 中期扩展
- [ ] WebSocket 实时通信
- [ ] 消息推送
- [ ] 系统设置
- [ ] 操作日志

### 长期扩展
- [ ] 多语言支持
- [ ] 暗色主题
- [ ] 插件系统
- [ ] 移动端适配

## 测试策略

### 单元测试
- 组件测试（Jest + React Testing Library）
- API 测试（Supertest）
- 工具函数测试

### 集成测试
- 前后端集成测试
- 数据库操作测试

### E2E 测试
- Electron 应用测试（Spectron）
- 用户流程测试

## 部署方案

### 开发环境
- 本地开发：`npm run dev`
- 热重载支持

### 生产环境
- 构建：`npm run build`
- 打包：`npm run package`
- 分发：生成安装包（Windows/Mac/Linux）

## 维护和支持

### 日志管理
- Fastify 日志
- Electron 日志
- 错误追踪

### 监控
- 性能监控
- 错误监控
- 用户行为分析

### 更新机制
- 自动更新检查
- 增量更新
- 版本管理

## 团队协作

### 开发流程
1. 需求分析
2. 技术设计
3. 编码实现
4. 代码审查
5. 测试验证
6. 部署上线

### 文档维护
- API 文档
- 组件文档
- 数据库文档
- 部署文档

## 联系方式

- 项目负责人：[姓名]
- 技术支持：[邮箱]
- 问题反馈：[GitHub Issues]

---

**版本：** 1.0.0
**最后更新：** 2024-11-09
**开发团队：** 雷犀客服系统开发组
